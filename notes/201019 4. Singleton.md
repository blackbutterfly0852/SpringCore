## 201019 싱글톤 컨테이너 - SingletonService.java, SingletonTest.java
### 1. 웹 어플리케이션과 싱글톤 
##### 1) 대부분의 스프링 애플리케이션은 웹 애플리케이션이다
##### 2) 웹 애플리케이션은 보통 여러 고객이 동시에 요청을 한다.
##### 3) AppConfig 는 요청을 할 때 마다 객체를 새로 생성한다. -> 메모리 낭비 -> 싱글톤 패턴으로 해결한다.

### 2. 싱글톤 패턴
##### 1) 클래스의 객체가 딱 1개만 생성되는 것을 보장하는 디자인 패턴이다.(private 생성자를 사용)
##### 2) 문제점 
* Spring 에 곧바로 적용하려면 getInstance()등의 메소드로 호출 해야 한다. 
* 즉, 구체 클래스에 의존할 가능성 높음 -> DIP, OCP 위반
* 코드 양 多
* 속성 변경, 초기화, 테스트 및 자식클래스 생성의 어려움 -> 유연성이 떨어진다.

### 3. 스프링 컨테이너 == 싱글톤 컨테이너
##### 1) 스프링 컨테이너는 싱글톤 패턴의 문제점을 해결하면서, 객체 인스턴스를 싱글톤(1개만 생성)으로 관리한다.
##### 2) 고객의 요청이 올 때 마다 객체를 생성하는 것이 아니라, 이미 만들어진 객체를 공유해서 효율적으로 재사용 사용할 수 있다.
##### 3) 싱글톤 방식외에도, 새로운 객체를 생성해서 반환하는 기능도 제공한다.(빈 스코프)
##### 4) 거의 99%는 싱글톤 방식

### 4. 싱글톤 방식의 주의점
##### 1) 객체를 무상태로 설계해야한다.
##### 2) Test/.../StatefulServiceTest.java 참고


### 5. Configuration 과 싱글톤
##### 1) AppConfig.java 에서 MemberRepository 는 결국 3번 호출, 그런데도 싱글톤을 유지
##### 2) Test/.../ConfigurationSingleTonTest.java 참고
##### 3) @Configuration 적용 때문 
* class hello.core.AppConfig$$EnhancerBySpringCGLIB$$bd479d70
* 스프링이 CGLIB라는 바이트코드 조작 라이브러리를 사용해서 AppConfig 클래스를 상속받은 임의의 다른 클래스를 만들고, 그 다른 클래스를 스프링 빈으로 등록한다.
* 임의의 다른 클래스는 이미 컨테이너에 등록된 빈 여부에 따라 다르게 리턴해주는 역할이며 싱글톤을 보장해준다.
* 만약 @Configuration 을 주석처리하고 @Bean만 붙여주면 스프링빈으로 등록되지만 싱글톤 보장 X


